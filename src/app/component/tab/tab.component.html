<div class="grid px-5">
    <div class="col-12 text-center py-5">
        <p-iconField iconPosition="left">
            <p-inputIcon styleClass="pi pi-search" />
            <input type="text" pInputText placeholder="Search" />
        </p-iconField>
    </div>
    <div class="col-12">
        <div class="grid w-full">
            @for (script of scripts; track $index) {
            <p-card [header]="script.title" class="col-6">
                <div>{{script.code}}</div>
                <p-footer >
                    <div class="grid justify-content-end gap-1">
                        <p-button label="Execute" icon="pi pi-code" size="small" (click)="execute('')" />
                        <p-button label="Copy" icon="pi pi-copy" size="small" severity="secondary" (click)="copy(script.code)"/>
                        <p-button label="Edit" icon="pi pi-pencil" size="small" severity="warning" (click)="openScriptDialog(script)"/>
                        <p-button  icon="pi pi-trash" size="small" severity="danger"/>
                    </div>
                </p-footer>
            </p-card>
            }
        </div>
    </div>
</div>

<p-button class="absolute bottom-0 right-0 p-5" icon="pi pi-plus" size="small" (click)="openScriptDialog('')"/>

<p-dialog [header]="scriptForm.controls.title.value? 'Edit Script' : 'Add Script'" [modal]="true" [(visible)]="scriptDialog" [style]="{ width: '40rem' }" [draggable]="false" [formGroup]="scriptForm">
    <div class="flex align-items-center gap-3 my-3">
        <label class="font-semibold w-6rem">Title</label>
        <input pInputText class="flex-auto" formControlName="title"/>
    </div>
    <div class="flex align-items-center gap-3 my-3">
        <label class="font-semibold w-6rem">Script</label>
        <textarea rows="5" pInputTextarea class="flex-auto" formControlName="code"></textarea>
    </div>

    <div class="flex justify-content-end gap-2">
        <p-button label="Cancel" severity="secondary" (onClick)="scriptDialog = false" />
        <p-button label="Save" (onClick)="scriptDialog = false" [disabled]="!scriptForm.valid" (click)="addScript()"/>
    </div>
</p-dialog>